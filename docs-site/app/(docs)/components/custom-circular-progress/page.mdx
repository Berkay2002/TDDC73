---
title: CustomCircularProgress
description: A circular progress indicator with indeterminate and determinate modes
asIndexPage: true
---

import { Callout, Steps, Tabs } from 'nextra/components'
import { ApiTable } from '@/components/ApiTable'

# CustomCircularProgress

A circular progress indicator that supports both indeterminate (spinning) and determinate (value-based) modes. This component demonstrates how to combine `CustomPaint` with `AnimationController` for smooth animations.

## Overview

`CustomCircularProgress` renders a circular progress bar using `CustomPaint`. It can either spin indefinitely to indicate loading or show a specific percentage of completion.

<Callout type="info">
**Primitives Used:** `CustomPaint`, `Canvas`, `AnimationController`
</Callout>

## Basic Usage

```dart
import 'package:primitive_ui/primitive_ui.dart';

// Indeterminate (spinning)
CustomCircularProgress()

// Determinate (50%)
CustomCircularProgress(
  value: 0.5,
)
```

## API Reference

### Constructor

```dart
CustomCircularProgress({
  Key? key,
  double? value,
  Color color = const Color(0xFF2196F3),
  double strokeWidth = 4.0,
  double size = 40.0,
})
```

### Parameters

<ApiTable
  parameters={[
    {
      name: 'value',
      type: 'double?',
      required: false,
      default: 'null',
      description: 'The value of the progress (0.0 to 1.0). If null, the indicator is indeterminate.',
    },
    {
      name: 'color',
      type: 'Color',
      required: false,
      default: 'Color(0xFF2196F3)',
      description: 'The color of the progress indicator.',
    },
    {
      name: 'strokeWidth',
      type: 'double',
      required: false,
      default: '4.0',
      description: 'The width of the line used to draw the circle.',
    },
    {
      name: 'size',
      type: 'double',
      required: false,
      default: '40.0',
      description: 'The diameter of the progress indicator.',
    },
  ]}
/>

## Examples

### Modes

<Tabs items={['Indeterminate', 'Determinate']}>
  <Tabs.Tab>
```dart
CustomCircularProgress(
  color: Colors.blue,
)
```
  </Tabs.Tab>
  <Tabs.Tab>
```dart
CustomCircularProgress(
  value: 0.75, // 75% complete
  color: Colors.green,
)
```
  </Tabs.Tab>
</Tabs>

### Custom Styling

```dart
CustomCircularProgress(
  value: 0.3,
  color: Colors.orange,
  size: 60.0,
  strokeWidth: 8.0,
)
```

### Loading State Example

```dart
class LoadingButton extends StatelessWidget {
  final bool isLoading;
  final VoidCallback onTap;

  LoadingButton({required this.isLoading, required this.onTap});

  @override
  Widget build(BuildContext context) {
    return GestureDetector(
      onTap: isLoading ? null : onTap,
      child: CustomCard(
        color: Colors.blue,
        child: Center(
          child: isLoading
              ? CustomCircularProgress(
                  color: Colors.white,
                  size: 24,
                  strokeWidth: 3,
                )
              : Text('Submit', style: TextStyle(color: Colors.white)),
        ),
      ),
    );
  }
}
```

## Implementation Details

The `CustomCircularProgress` is implemented using:

1.  **`AnimationController`**: Used primarily for the indeterminate state to rotate the visual.
2.  **`AnimatedBuilder`**: Listens to the controller and triggers repaints.
3.  **`CustomPaint`**:
    - **Determinate**: Draws a partial arc based on the `value` property (e.g., `2 * pi * value`).
    - **Indeterminate**: Rotates a fixed-length arc based on the animation value.

### Drawing Logic

```dart
if (value != null) {
  // Determinate: draw arc based on value
  double sweepAngle = 2 * pi * value!.clamp(0.0, 1.0);
  canvas.drawArc(rect, -pi / 2, sweepAngle, false, paint);
} else {
  // Indeterminate: rotate fixed arc
  // ... rotation logic ...
  canvas.drawArc(rect, startAngle, sweepAngle, false, paint);
}
```

## Limitations

<Callout type="warning">
**Known Limitations:**
- The indeterminate animation is a simple rotation; it does not currently implement the complex "worm" expansion/contraction effect of the Material Design spinner to keep the primitive implementation simple.
</Callout>

## Related Components

- [CustomSlider](/components/custom-slider) - Input for values
- [CustomCard](/components/custom-card) - Container often used with loaders

## Source Code

View the complete implementation in the [GitHub repository](https://github.com/Berkay2002/TDDC73/blob/main/project/primitive_ui/lib/src/components/custom_circular_progress.dart).
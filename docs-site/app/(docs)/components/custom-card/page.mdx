---
title: CustomCard
description: A container widget with shadow, rounded corners, and padding - all rendered using Canvas
asIndexPage: true
---

import { Callout, Steps, Tabs } from 'nextra/components'
import { ApiTable } from '@/components/ApiTable'

# CustomCard

A container widget with shadow, rounded corners, and padding - all rendered using `CustomPaint` and `Canvas`.

## Overview

`CustomCard` provides a Material-style card appearance using only primitive Flutter components. It demonstrates how shadows, rounded corners, and elevation can be implemented from scratch without relying on Flutter's built-in `Card` widget.

<Callout type="info">
**Primitives Used:** `CustomPaint`, `Canvas`, `RenderShiftedBox`
</Callout>

## Basic Usage

```dart
import 'package:primitive_ui/primitive_ui.dart';

CustomCard(
  child: Text('Hello World'),
)
```

## API Reference

### Constructor

```dart
CustomCard({
  Key? key,
  required Widget child,
  Color color = const Color(0xFFFFFFFF),
  double borderRadius = 8.0,
  double elevation = 2.0,
  EdgeInsets padding = const EdgeInsets.all(16.0),
})
```

### Parameters

<ApiTable
  parameters={[
    {
      name: 'child',
      type: 'Widget',
      required: true,
      default: null,
      description: 'The widget to display inside the card'
    },
    {
      name: 'color',
      type: 'Color',
      required: false,
      default: 'Color(0xFFFFFFFF)',
      description: 'Background color of the card'
    },
    {
      name: 'borderRadius',
      type: 'double',
      required: false,
      default: '8.0',
      description: 'Corner radius in logical pixels (must be >= 0)'
    },
    {
      name: 'elevation',
      type: 'double',
      required: false,
      default: '2.0',
      description: 'Shadow depth in logical pixels (must be >= 0)'
    },
    {
      name: 'padding',
      type: 'EdgeInsets',
      required: false,
      default: 'EdgeInsets.all(16.0)',
      description: 'Internal spacing around the child widget'
    }
  ]}
/>

## Examples

### Different Elevations

<Tabs items={['Low', 'Medium', 'High']}>
  <Tabs.Tab>
```dart
CustomCard(
  elevation: 2.0,
  child: Text('Low elevation'),
)
```
  </Tabs.Tab>
  <Tabs.Tab>
```dart
CustomCard(
  elevation: 4.0,
  child: Text('Medium elevation'),
)
```
  </Tabs.Tab>
  <Tabs.Tab>
```dart
CustomCard(
  elevation: 8.0,
  child: Text('High elevation'),
)
```
  </Tabs.Tab>
</Tabs>

### Custom Styling

```dart
CustomCard(
  color: Color(0xFFE3F2FD), // Light blue
  borderRadius: 16.0,
  elevation: 8.0,
  padding: EdgeInsets.symmetric(
    horizontal: 24.0,
    vertical: 16.0,
  ),
  child: Column(
    children: [
      Text(
        'Card Title',
        style: TextStyle(
          fontSize: 18,
          fontWeight: FontWeight.bold,
        ),
      ),
      SizedBox(height: 8),
      Text('Card content goes here'),
    ],
  ),
)
```

### Nested Layout

```dart
CustomCard(
  elevation: 4.0,
  child: VStack(
    spacing: 12.0,
    children: [
      Text('Settings', 
        style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold)
      ),
      CustomToggleSwitch(
        value: notificationsEnabled,
        onChanged: (value) {
          setState(() => notificationsEnabled = value);
        },
      ),
    ],
  ),
)
```

## Implementation Details

### Rendering Pipeline

The `CustomCard` uses a multi-layered rendering approach:

1. **Custom Painter** (`_CardPainter`) handles the visual rendering
2. **Custom Layout** (`_RenderCardLayout`) manages child positioning with padding
3. **Canvas Operations** draw the shadow and rounded rectangle

### Shadow Calculation

Shadow opacity is calculated based on elevation using the Material Design scale:

```dart
final double shadowOpacity = (elevation / 24.0).clamp(0.0, 0.3);
```

This ensures that higher elevations produce darker shadows, with a maximum opacity of 0.3 to prevent overly dark shadows.

### Layout System

The card uses a custom `RenderShiftedBox` implementation that:
- Calculates child constraints by subtracting padding from available space
- Positions the child with padding offset
- Computes intrinsic dimensions including padding

### Performance Optimization

The `shouldRepaint()` method only returns `true` when visual properties change:

```dart
bool shouldRepaint(_CardPainter oldDelegate) {
  return oldDelegate.color != color ||
      oldDelegate.borderRadius != borderRadius ||
      oldDelegate.elevation != elevation;
}
```

This prevents unnecessary repaints when the card state hasn't changed.

## Common Patterns

### Card Grid Layout

```dart
GridView.builder(
  gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(
    crossAxisCount: 2,
    spacing: 16.0,
  ),
  itemBuilder: (context, index) {
    return CustomCard(
      elevation: 2.0,
      child: Center(child: Text('Card $index')),
    );
  },
)
```

### Interactive Card

```dart
GestureDetector(
  onTap: () => print('Card tapped'),
  child: CustomCard(
    elevation: 2.0,
    child: Text('Tap me!'),
  ),
)
```

## Limitations

<Callout type="warning">
**Known Limitations:**
- Shadow extends beyond the card bounds by the elevation amount - ensure parent has sufficient padding
- No built-in ink splash or ripple effects (use `GestureDetector` separately)
- Shadow color is always black with varying opacity (no custom shadow colors)
</Callout>

## Related Components

- [VStack](/components/vstack) - For vertical layouts inside cards
- [ZStack](/components/zstack) - For layered content inside cards
- [CustomToggleSwitch](/components/custom-toggle-switch) - Common card content

## Source Code

View the complete implementation in the [GitHub repository](https://github.com/Berkay2002/TDDC73/blob/main/project/primitive_ui/lib/src/components/custom_card.dart).

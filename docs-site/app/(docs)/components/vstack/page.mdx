---
title: VStack
description: A vertical stack layout component with spacing, alignment, and flex support
asIndexPage: true
---

import { Callout, Steps, Tabs } from 'nextra/components'
import { ApiTable } from '@/components/ApiTable'
import { AppEmbed } from '@/components/AppEmbed'

# VStack

A vertical stack layout component that arranges its children vertically with configurable spacing and alignment.

## Overview

`VStack` provides vertical layout capabilities using a custom `RenderBox` implementation. It demonstrates how Flutter's layout system works under the hood, including support for flexible children via `CustomFlexible` and `CustomExpanded`.

<Callout type="info">
**Primitives Used:** Custom `RenderBox`, `CustomMultiChildLayout`, `ParentDataWidget`
</Callout>

<AppEmbed
  src="/demo/#/snippet/vstack"
  title="VStack Showcase"
  height={600}
/>

## Basic Usage

```dart
import 'package:primitive_ui/primitive_ui.dart';

VStack(
  spacing: 16.0,
  children: [
    Text('Fixed Height'),
    CustomExpanded(
      child: Container(color: Colors.blue),
    ),
    Text('Fixed Height'),
  ],
)
```

## API Reference

### Constructor

```dart
VStack({
  Key? key,
  required List<Widget> children,
  double spacing = 0.0,
  CrossAxisAlignment crossAxisAlignment = CrossAxisAlignment.start,
  MainAxisAlignment mainAxisAlignment = MainAxisAlignment.start,
  MainAxisSize mainAxisSize = MainAxisSize.max,
})
```

### Parameters

<ApiTable
  parameters={[
    {
      name: 'children',
      type: 'List<Widget>',
      required: true,
      default: null,
      description: 'The widgets to display in the vertical stack'
    },
    {
      name: 'spacing',
      type: 'double',
      required: false,
      default: '0.0',
      description: 'Vertical spacing between children (must be >= 0)'
    },
    {
      name: 'crossAxisAlignment',
      type: 'CrossAxisAlignment',
      required: false,
      default: 'CrossAxisAlignment.start',
      description: 'How to align children horizontally'
    },
    {
      name: 'mainAxisAlignment',
      type: 'MainAxisAlignment',
      required: false,
      default: 'MainAxisAlignment.start',
      description: 'How to align children vertically'
    },
    {
      name: 'mainAxisSize',
      type: 'MainAxisSize',
      required: false,
      default: 'MainAxisSize.max',
      description: 'Whether to take maximum or minimum vertical space'
    }
  ]}
/>

### CustomFlexible & CustomExpanded

Wrap children in these widgets to control their flex behavior.

#### CustomFlexible

```dart
CustomFlexible({
  Key? key,
  int flex = 1,
  FlexFit fit = FlexFit.loose,
  required Widget child,
})
```

#### CustomExpanded

Shortcut for `CustomFlexible(fit: FlexFit.tight)`.

```dart
CustomExpanded({
  Key? key,
  int flex = 1,
  required Widget child,
})
```

## Examples

### Different Alignments

<Tabs items={['Start', 'Center', 'End', 'Stretch']}>
  <Tabs.Tab>
```dart
VStack(
  crossAxisAlignment: CrossAxisAlignment.start,
  spacing: 8.0,
  children: [
    Container(width: 100, height: 50, color: Colors.red),
    Container(width: 150, height: 50, color: Colors.green),
    Container(width: 80, height: 50, color: Colors.blue),
  ],
)
```
  </Tabs.Tab>
  <Tabs.Tab>
```dart
VStack(
  crossAxisAlignment: CrossAxisAlignment.center,
  spacing: 8.0,
  children: [
    Container(width: 100, height: 50, color: Colors.red),
    Container(width: 150, height: 50, color: Colors.green),
    Container(width: 80, height: 50, color: Colors.blue),
  ],
)
```
  </Tabs.Tab>
  <Tabs.Tab>
```dart
VStack(
  crossAxisAlignment: CrossAxisAlignment.end,
  spacing: 8.0,
  children: [
    Container(width: 100, height: 50, color: Colors.red),
    Container(width: 150, height: 50, color: Colors.green),
    Container(width: 80, height: 50, color: Colors.blue),
  ],
)
```
  </Tabs.Tab>
  <Tabs.Tab>
```dart
VStack(
  crossAxisAlignment: CrossAxisAlignment.stretch,
  spacing: 8.0,
  children: [
    Container(height: 50, color: Colors.red),
    Container(height: 50, color: Colors.green),
    Container(height: 50, color: Colors.blue),
  ],
)
```
  </Tabs.Tab>
</Tabs>

### Flexible Layouts

<Tabs items={['Expanded', 'Weighted Flex', 'Mixed']}>
  <Tabs.Tab>
```dart
// Fills available vertical space
VStack(
  children: [
    Container(height: 50, color: Colors.red),
    CustomExpanded(
      child: Container(color: Colors.blue), // Takes remaining space
    ),
    Container(height: 50, color: Colors.green),
  ],
)
```
  </Tabs.Tab>
  <Tabs.Tab>
```dart
// Proportional distribution (1:2 ratio)
VStack(
  children: [
    CustomFlexible(
      flex: 1,
      child: Container(color: Colors.red),
    ),
    CustomFlexible(
      flex: 2,
      child: Container(color: Colors.blue),
    ),
  ],
)
```
  </Tabs.Tab>
  <Tabs.Tab>
```dart
// Fixed + Flexible
VStack(
  spacing: 10,
  children: [
    Text("Header"),
    CustomExpanded(
      child: Container(color: Colors.grey[200]),
    ),
    Text("Footer"),
  ],
)
```
  </Tabs.Tab>
</Tabs>

## Implementation Details

### Layout Algorithm

The VStack layout process has been upgraded to support two-pass layout for flex children:

1. **Pass 1 (Fixed Children)**: Measure all non-flex children.
   ```dart
   if (flex == 0) {
      child.layout(...);
      totalNonFlexHeight += child.size.height;
   }
   ```

2. **Calculate Free Space**: Determine space available for flex children.
   ```dart
   freeSpace = availableHeight - totalNonFlexHeight - totalSpacing;
   ```

3. **Pass 2 (Flex Children)**: Measure flex children using allocated space.
   ```dart
   childHeight = (freeSpace * flex) / totalFlex;
   child.layout(constraints.tighten(height: childHeight));
   ```

4. **Positioning**: Place all children in sequence.

### Parent Data

`VStack` uses `_VStackParentData` to store `flex` and `fit` properties for each child, populated by `CustomFlexible`.

## Limitations

<Callout type="warning">
**Known Limitations:**
- No built-in overflow handling (use `SingleChildScrollView` when needed)
- No spacer or divider components built-in (use `CustomExpanded` with `SizedBox` or `Container` for spacer)
- All children are measured even if not visible
</Callout>

## Differences from Column

| Feature | VStack | Column |
|---------|--------|--------|
| Flexible/Expanded | ✅ Supported (via CustomFlexible) | ✅ Supported |
| Baseline alignment | ❌ Not supported | ✅ Supported |
| Text direction | ✅ Supported | ✅ Supported |
| Intrinsic sizing | ✅ Implemented | ✅ Implemented |
| Performance | Good for simple layouts | Optimized for all cases |

## Best Practices

### Use VStack When:
- You need simple vertical layouts
- Learning how layout systems work
- Building educational projects
- Spacing between children is uniform
- You need precise control over spacing (using `spacing` param)

### Use Column Instead When:
- You need baseline alignment
- Performance is critical with many children
- You rely on standard Flutter widgets that expect `Column`

## Related Components

- [ZStack](/components/zstack) - For layered layouts
- [PrimitiveCard](/components/primitive-card) - Common VStack child

## Source Code

View the complete implementation in the [GitHub repository](https://github.com/Berkay2002/TDDC73/blob/main/project/primitive_ui/lib/src/components/v_stack.dart).